on: [pull_request]

jobs:
  sql-review:
    runs-on: ubuntu-latest
    name: SQL Review
    steps:
      - uses: actions/checkout@v3
      - name: Check SQL
        # You can change it to a specific version like bytebase/sql-review-action@0.0.4
        # We suggest using the latest version through the tag. Check it at https://github.com/Bytebase/sql-review-action/tags
        uses: bytebase/sql-review-action@main
        with:
          override-file-path: bb.sql_review.dev.yml
          # template-id: "<SQL review rule template id>"
          database-type: "MYSQL"
          file-pattern: ^github-actions-test/.*\.sql$
  sql-test:
    runs-on: ubuntu-latest
    name: sql test
    steps:
      - name: sql test
        run: |
          sudo /etc/init.d/mysql start
          mysql -h 127.0.0.1 -p -u root kipsu_stage_v4 < github-actions-test/enableQuore.sql
